\documentclass{article}
\usepackage{amsmath}
\usepackage{tikz}
\usetikzlibrary{trees}
\usepackage{graphicx}
\usepackage[english,greek]{babel}
\usepackage{listings}
\usepackage{array}
\usepackage{float}

\newcommand{\includeimage}[2]{
    \begin{figure}[H]
        \centering
        \includegraphics[width=\linewidth]{#1}
        \if\relax\detokenize{#2}\relax
            % Do nothing if #2 is empty
        \else
            \caption{#2}
        \fi
    \end{figure}
}

\begin{document}
\title{$Project$ ΗΥ-360}
\author{Δρακάκης Ραφαήλ $csd5310$\\Άγγελος-Τίτος Δήμογλης $csd5078$\\Κωνσταντίνος Κουναλάκης $csd5058$}
\date{}
\maketitle
\section*{1η φάση}
Η πρώτη φάση αφορά την δημιουργία ενός πλήρους εννοιολογικού μοντέλου.
\subsection*{$E-R$ Διάγραμμα}
\includeimage{E-R.png}{Το ζητούμενο διάγραμμα}
Στο διάγραμμα φαίνονται τα γνωρίσματα όλων των οντοτήτων και σχέσεων και τα πρωτεύοντα κλειδιά\\
Σχετικά με τα γνωρίσματα και τις σχέσεις έχουμε:\\
Μια σχέση $contains$ ανάμεσα στο $ticket$ και το $reservation$, και μια σχέση $Makes$ ανάμεσα στον $customer$ και το $reservation$.\\
Οι περιορισμοί για τις πληθικότητες φαίνονται στο σχήμα
\subsection*{Μετάφραση στο σχεσιακό μοντέλο}
Παρακάτω φαίνονται οι πίνακες για το σχεσιακό μοντέλο\\
% Table 1: Customer
\noindent
\begin{tabular}{|c|c|c|c|c|}
\hline
\multicolumn{5}{|c|}{$Customer$} \\
\hline
$cid$ & $mail$ & $credit\_info$ & $f\_name$ & $l\_name$ \\
\hline
& & & & \\
\hline
\end{tabular}

\vspace{10pt}

% Table 2: Event
\noindent
\begin{tabular}{|c|c|c|c|c|c|}
\hline
\multicolumn{6}{|c|}{$Event$} \\
\hline
$eid$ & $name$ & $type$ & $time$ & $date$ & $capacity$ \\
\hline
& & & & & \\
\hline
\end{tabular}

\vspace{10pt}

% Table 3: Ticket
\noindent
\begin{tabular}{|c|c|c|c|c|}
\hline
\multicolumn{5}{|c|}{$Ticket$} \\
\hline
$tid$ & $type$ & $price$ & $availability$ & $seat\_number$ \\
\hline
& & & & \\
\hline
\end{tabular}

\vspace{10pt}

% Table 4: Reservation
\noindent
\begin{tabular}{|c|c|c|c|c|c|}
\hline
\multicolumn{6}{|c|}{$Reservation$} \\
\hline
$rid$ & $eid$ & $cid$ & $date$ & $total\_price$ & $tickets\_number$ \\
\hline
& & & & & \\
\hline
\end{tabular}

\vspace{10pt}

% Relations

% Relation: Contains (Event and Ticket)
\noindent
\begin{tabular}{|c|c|}
\hline
\multicolumn{2}{|c|}{$Contains$} \\
\hline
$eid$ & $tid$ \\
\hline
& \\
\hline
\end{tabular}

\vspace{5pt}

% Relation: Makes (Customer and Reservation)
\noindent
\begin{tabular}{|c|c|}
\hline
\multicolumn{2}{|c|}{$Makes$} \\
\hline
$cid$ & $rid$ \\
\hline
& \\
\hline
\end{tabular}

\vspace{5pt}

% Relation: Has (Customer and Reservation)
\noindent
\begin{tabular}{|c|c|}
\hline
\multicolumn{2}{|c|}{$Has$} \\
\hline
$tid$ & $eid$ \\
\hline
& \\
\hline
\end{tabular}

\subsection*{Εντολές της γλώσσας ορισμού δεδομένων για τις σχέσεις που προκύπτουν}
\selectlanguage{english}
\begin{lstlisting}
CREATE TABLE Customer (
    cid INT PRIMARY KEY,
    mail VARCHAR(255) NOT NULL,
    credit_info VARCHAR(255),
    f_name VARCHAR(100),
    l_name VARCHAR(100)
);
\end{lstlisting}

\begin{lstlisting}
CREATE TABLE Event (
    eid INT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    type VARCHAR(100),
    time TIME,
    date DATE,
    capacity INT
);
\end{lstlisting}

\begin{lstlisting}
CREATE TABLE Ticket (
    tid INT PRIMARY KEY,
    type VARCHAR(100),
    price DECIMAL(10, 2),
    availability BOOLEAN DEFAULT TRUE,
    seat_number INT
);
\end{lstlisting}

\begin{lstlisting}
CREATE TABLE Reservation (
    rid INT PRIMARY KEY,
    eid INT,
    cid INT,
    date DATE,
    total_price DECIMAL(10, 2),
    tickets_number INT,
    FOREIGN KEY (eid) REFERENCES Event(eid),
    FOREIGN KEY (cid) REFERENCES Customer(cid)
);
\end{lstlisting}

\begin{lstlisting}
CREATE TABLE Contains (
    eid INT,
    tid INT,
    PRIMARY KEY (eid, tid),
    FOREIGN KEY (eid) REFERENCES Event(eid),
    FOREIGN KEY (tid) REFERENCES Ticket(tid)
);
\end{lstlisting}

\begin{lstlisting}
CREATE TABLE Makes (
    cid INT,
    rid INT,
    PRIMARY KEY (cid, rid),
    FOREIGN KEY (cid) REFERENCES Customer(cid),
    FOREIGN KEY (rid) REFERENCES Reservation(rid)
);
\end{lstlisting}

\begin{lstlisting}
CREATE TABLE Has (
    tid INT,
    eid INT,
    PRIMARY KEY (tid, eid),
    FOREIGN KEY (tid) REFERENCES Ticket(tid),
    FOREIGN KEY (eid) REFERENCES Event(eid)
);
\end{lstlisting}
\selectlanguage{greek}
\end{document}